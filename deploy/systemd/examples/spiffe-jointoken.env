## SPIFFE Join Token Authentication (Method 2)
## Zero-touch provisioning using SPIRE agent with join token attestation
##
## Prerequisites:
## - SPIRE agent installed and running (spire-agent.service)
## - Join token generated and configured in SPIRE agent
## - Install 10-spire-dependency.conf drop-in for service dependency
##
## Use this for:
## - Zero-touch provisioning of new edge devices
## - Initial fleet deployment scenarios
## - Environments where devices can be pre-registered with join tokens
##
## Security: mTLS via SPIFFE SVIDs with automatic rotation

## REQUIRED: Ground Control URL
GROUND_CONTROL_URL=https://ground-control.example.com:8080

## REQUIRED: Enable SPIFFE authentication
SPIFFE_ENABLED=true

## SPIFFE Workload API socket (default: unix:///run/spire/sockets/agent.sock)
SPIFFE_ENDPOINT_SOCKET=unix:///run/spire/sockets/agent.sock

## REQUIRED: Expected SPIFFE ID of Ground Control server
## This must match the SPIFFE ID presented by Ground Control
SPIFFE_EXPECTED_SERVER_ID=spiffe://harbor-satellite.local/gc/main

## Token not required when SPIFFE is enabled
# TOKEN is not needed

## Optional: Logging
# JSON_LOGGING=true
